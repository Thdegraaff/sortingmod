<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>sortingmod is a package for estimating the sorting model. • sortingmod</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">sortingmod</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="/index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/my-vignette.html">sortingmod</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
    
<div id="overview" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h1></div>
<p>sortingmod is a package for estimating the sorting model - a discrete choice model which explains the location decision of heterogeneous individuals over a set of alternative locations. The model is developed by Bayer et al. (2004) following the work of Berry et al. (1995). It relies on the assumptions that individuals choose a location that maximizes their utility, and that heterogeneous individuals with different characteristics have different preferences, and different valuation for location characteristics. The results of the model provide choice probabilities for each alternative, as well as insight on the valuation patterns of heterogeneous agents, and marginal willingness-to-pay values for location characteristics.</p>
<p>The package is constructed as an accompanying tool for the Summer School in “Hedonic price analysis and the residential location choice”, hosted by the Kraks Fond - Institute for Urban Economic Research (Copenhagen, Denmark).</p>
</div>
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<p><code>sortingmod</code> is not currently available from CRAN, but you can install the development version from github with (note that you need to install the package <code>devtools</code> to be able to install packages from GitHub:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("devtools")</span>
<span class="co"># library("devtools")</span>
devtools::<span class="kw">install_github</span>(<span class="st">"thdegraaff/sortingmod"</span>)</code></pre></div>
<p>Once installation is completed, the package can be loaded.</p>
<pre class="{r}"><code>library(sortingmod)</code></pre>
</div>
<div id="components" class="section level1">
<h1 class="hasAnchor">
<a href="#components" class="anchor"></a>Components</h1>
<ul>
<li>
<code><a href="reference/first_stage.html">first_stage(code_name, Z_names, X_names, data, print_detail = 3)</a></code> - Estimates the first stage of a. sorting model</li>
<li>
<code><a href="reference/second_stage.html">second_stage(s1.results, data, endog = NULL, instr = NULL)</a></code> - Estimates the second of a sorting model</li>
<li>
<code><a href="reference/sorting_inst.html">sorting_inst(s1.results, endog, data, n.iterations = 3, stepsize = 0.05, threshold = 0.0005)</a></code> - Calculates an instrument for an endogenous variable in a sorting model setting</li>
</ul>
<p>The data for the estimation should be in data frame format, and it must contain:</p>
<ul>
<li>One or more columns indicating characteristics (<code>Z_names</code>) of a unique agent making a discrete choice between available alternatives (individuals, households, etc.).</li>
<li>A vector indicating the chosen alternative (<code>code_name</code>).</li>
<li>One or more columns indicating characteristics (<code>X_names</code>) of the chosen alternative.</li>
<li>Each row of the data frame should represent a unique individual. The number of alternatives should therefore be smaller or equal to the number of individuals.</li>
<li>Individual and alternative characteristics should be numeric variables. Factor variables are not yet supported, so it’s best to transform them into numeric dummy variables if you intend to include them in the model.</li>
</ul>
</div>
<div id="usage" class="section level1">
<h1 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h1>
<p>Define dataset, alternative identifier variable and explanatory variable sets X and Z <code>{r, eval = FALSE}     data &lt;- municipality</code> Estimate the first stage of the sorting model <code>{r, eval = FALSE}     X.vars &lt;- c("lnprice","nature","monuments","schools_3km")     Z.vars &lt;- c("income","double_earner_hh","hh_kids","age")     Alt.var = "mun_code"     s1.results &lt;- first_stage(code_name = Alt.var,                                X_names = X.vars                                Z_names = Z.vars,                                data = data,                                print_detail = 1)</code> Estimate the second stage of the model, assuming exogeneity of explanatory variables <code>{r, eval = FALSE}    s2.results &lt;- second_stage(s1.results, data)</code> Define endogenous variables and calculate an instrument based on equilibrium conditions. Estimate the second stage of the sorting model using the calculated instrument. <code>{r, eval = FALSE}     endog &lt;- ("lnprice")     phat &lt;- sorting_inst(s1.results, "lnprice", data, stepsize = 0.02)     plot(phat$sorting_inst, phat$endogenous, xlab="Instrument", ylab="Endogeneous variable")</code> Estimate the second stage of the model, using instruments for the endogenous variables. ```{r, eval = FALSE} instruments &lt;- cbind(sorting_inst = phat$sorting_inst, historical.monuments = monuments) s2.results &lt;- second_stage(s1.results, data, c(“lnprice”,“cafes_1km”), instruments)</p>
<p>```</p>
</div>
<div id="getting-help" class="section level1">
<h1 class="hasAnchor">
<a href="#getting-help" class="anchor"></a>Getting help</h1>
<p>If you need assistance using <code>sortingmod</code>, you can get in touch by emailing <a href="t.de.graaff@vu.nl" class="uri">t.de.graaff@vu.nl</a> or <a href="o.d.levkovich@vu.nl" class="uri">o.d.levkovich@vu.nl</a>.</p>
</div>
<div id="references" class="section level1">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<p>Bayer, P., McMillan, R., &amp; Rueben, K. (2004). An equilibrium model of sorting in an urban housing market (No. w10865). National Bureau of Economic Research.</p>
<p>Berry, S., Levinsohn, J., &amp; Pakes, A. (1995). Automobile prices in market equilibrium. Econometrica: Journal of the Econometric Society, 841-890.</p>
</div>

  </div>

  <div class="col-md-3" id="sidebar">
    <h2>License</h2>
<p><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Thomas de Graaff <br><small class="roles"> Author, maintainer </small> </li>
<li>Or Levkovich <br><small class="roles"> Author </small> </li>
</ul>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Thomas de Graaff, Or Levkovich.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
